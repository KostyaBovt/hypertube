(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,a){},260:function(e,t,a){e.exports=a.p+"static/media/not_found.f7f419f8.jpg"},311:function(e,t,a){e.exports=a(620)},620:function(e,t,a){"use strict";a.r(t);var r,n,i,o,s,l,c,u,m,p,d,h,g,b=a(0),f=a.n(b),v=a(33),y=a.n(v),E=(a(151),a(265)),O=a(17),w=a(18),j=a(27),k=a(26),S=a(28),C=a(4),A=a(8),P=a(97),x=a.n(P),D=a(98),M=a.n(D),F=a(29),N=a.n(F),I=a(40),L=a.n(I),B=a(16),_=a(1),Q=function(e){return new Promise(function(t,a){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){console.error(e.target.error),a(e.target.error)},r.readAsDataURL(e)})},U=function(e,t){return e.avatar?f.a.createElement(_.a,{className:t?t.avatar:"",src:"http://localhost:8080".concat(e.avatar)}):f.a.createElement(_.a,{className:t?t.avatar:"",src:e.avatar},"".concat(e.fname.charAt(0)).concat(e.lname.charAt(0)))},G=a(41),V=a(621),T=Object(G.b)()(r=Object(B.b)("SelfStore","AuthStore")(r=Object(B.c)(r=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={anchorEl:null},a.logoutUser=a.logoutUser.bind(Object(C.a)(Object(C.a)(a))),a.handleMenu=a.handleMenu.bind(Object(C.a)(Object(C.a)(a))),a.handleMenuClose=a.handleMenuClose.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"logoutUser",value:function(){this.handleMenuClose(),this.props.SelfStore.forgetSelf(),this.props.AuthStore.logout()}},{key:"handleMenu",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleMenuClose",value:function(e){this.setState({anchorEl:null})}},{key:"renderAuthButtons",value:function(e,t){var a=this.props.SelfStore.self,r=this.state.anchorEl;if(a){var n=!!r;return f.a.createElement(f.a.Fragment,null,f.a.createElement(_.v,{"aria-owns":n?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu},U(a)),f.a.createElement(_.F,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:n,onClose:this.handleMenuClose},f.a.createElement(_.G,{onClick:this.handleMenuClose,button:!0,component:V.a,to:"/settings"},f.a.createElement(_.C,{className:e.icon},f.a.createElement(_.u,null,"settings")),f.a.createElement(N.a,{variant:"inherit",noWrap:!0},t("header:settings"))),f.a.createElement(_.G,{button:!0,onClick:this.logoutUser},f.a.createElement(_.C,{className:e.icon},f.a.createElement(_.u,null,"exit_to_app")),f.a.createElement(N.a,{variant:"inherit",noWrap:!0},t("header:logout")))))}return f.a.createElement(f.a.Fragment,null,f.a.createElement(L.a,{component:V.a,to:"/auth/registration",className:e.buttons,color:"inherit"},t("header:register")),f.a.createElement(L.a,{component:V.a,to:"/auth/login",className:e.buttons,color:"inherit"},t("header:login")))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t;return f.a.createElement("div",{className:t.root},f.a.createElement(x.a,{position:"static"},f.a.createElement(M.a,null,f.a.createElement(N.a,{id:"logo",variant:"h6",color:"inherit",className:t.grow},f.a.createElement(V.a,{to:"/",className:t.link},"HyperTube")),this.renderAuthButtons(t,a))))}}]),t}(b.Component))||r)||r)||r,R=Object(A.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},buttons:{marginLeft:5},link:{textDecoration:"none",color:"white"}})(T),z=a(81),W=a.n(z),q={footer:{position:"absolute",bottom:"0",backgroundColor:"#009688;",width:"100%"},typography:{color:W.a[100]}},K=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.classes;return f.a.createElement("footer",{className:e.footer},f.a.createElement(N.a,{variant:"subtitle2",align:"center",className:e.typography},"aklimchu lmalaya kbovt rtarasen"),f.a.createElement(N.a,{variant:"subtitle2",align:"center",className:e.typography},"\xa9 2018"))}}]),t}(b.Component),H=Object(A.withStyles)(q)(K),J=a(48),X=a(11),Y=a.n(X),Z=a(39),$=a.n(Z),ee=a(258),te=a.n(ee),ae=a(259),re=Object(G.b)()(n=Object(B.b)("MovieStore","SelfStore","LibraryStore")(n=Object(B.c)(n=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={movieId:a.props.match.params.id,commentValue:"",streamingUrl:void 0,resolution:void 0},a.handleInput=a.handleInput.bind(Object(C.a)(Object(C.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(Object(C.a)(a))),a.handleSelection=a.handleSelection.bind(Object(C.a)(Object(C.a)(a))),a.resetCommentInput=a.resetCommentInput.bind(Object(C.a)(Object(C.a)(a))),a.handleSelection=a.handleSelection.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.movieId,t=this.props.MovieStore;t.fetchMovieDetails(e),t.fetchComments(e)}},{key:"componentWillUnmount",value:function(){this.props.MovieStore.resetMovie()}},{key:"handleInput",value:function(e){this.setState({commentValue:e.target.value})}},{key:"resetCommentInput",value:function(){this.setState({commentValue:""})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.MovieStore,a=this.state,r=a.movieId,n=a.commentValue;t.postComment(r,n),this.resetCommentInput()}},{key:"handleSelection",value:function(e,t){var a=this.props.LibraryStore;this.setState({streamingUrl:e,resolution:t}),a.setSelectedMovieAsWatched()}},{key:"renderPlayer",value:function(){var e=this.props,t=e.MovieStore,a=e.classes,r=t.movie,n=this.state,i=n.streamingUrl,o=n.resolution;if(i||r.trailer)return f.a.createElement(Y.a,{item:!0,className:a.playerContainer},f.a.createElement(te.a,{controls:!0,className:a.reactPlayer,url:i||r.trailer,poster:r.backdrop_path,config:{file:{attributes:{crossOrigin:"use-credentials"},tracks:[{kind:"subtitles",src:"http://localhost:3200/subtitles/".concat(r.imdb_id,"/").concat(o,"/en"),srcLang:"en"},{kind:"subtitles",src:"http://localhost:3200/subtitles/".concat(r.imdb_id,"/").concat(o,"/ru"),srcLang:"ru"}]}},width:"100%",height:"100%"}))}},{key:"renderStreamingButtons",value:function(){var e=this,t=this.props,a=t.classes,r=t.t,n=t.MovieStore.movie;if(n&&n.streaming){var i=n.streaming.map(function(t){var n=t.split("/").pop();return f.a.createElement(Y.a,{key:t,item:!0,className:a.item},f.a.createElement(_.b,{variant:"contained",color:"primary",onClick:function(){return e.handleSelection(t,n)}},f.a.createElement(_.u,{className:a.leftIcon},"play_arrow"),"".concat(r("movie:streamIn")," ").concat(n)))});return f.a.createElement(Y.a,{item:!0,className:a.item},f.a.createElement(Y.a,{container:!0,justify:"center"},i))}}},{key:"renderCommentSectionActions",value:function(e){var t=this.props.t;return f.a.createElement(Y.a,{container:!0,justify:"flex-end"},f.a.createElement(Y.a,{item:!0,className:e.item},f.a.createElement(_.b,{onClick:this.resetCommentInput,variant:"text"},t("movie:cancel"))),f.a.createElement(Y.a,{item:!0,className:e.item},f.a.createElement(_.b,{onClick:this.handleSubmit,variant:"contained",color:"primary"},t("movie:send"))))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,r=this.state,n=r.commentValue,i=r.streamingUrl,o=this.props.SelfStore.self,s=this.props.MovieStore,l=s.movie,c=s.comments;return void 0===l?f.a.createElement("main",null,f.a.createElement(Y.a,{container:!0,className:t.container,justify:"center"},f.a.createElement(Y.a,{item:!0},f.a.createElement(_.j,null)))):null===l?f.a.createElement("main",null,f.a.createElement(Y.a,{container:!0,className:t.container,justify:"center"},f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{variant:"subtitle2",color:"textSecondary"},a("movie:unavailable"))))):f.a.createElement("main",null,f.a.createElement(Y.a,{item:!0,xs:!0,md:8,className:t.root},f.a.createElement($.a,null,f.a.createElement(Y.a,{container:!0,spacing:0,direction:"column"},f.a.createElement(Y.a,{container:!0,justify:"center",direction:"column",className:t.container},f.a.createElement(Y.a,{item:!0},f.a.createElement(Y.a,{container:!0,justify:"center"},f.a.createElement(Y.a,{item:!0,md:5,xl:4,className:t.item},f.a.createElement("img",{className:t.media,src:l.poster_path,alt:"Movie poster"})),f.a.createElement(Y.a,{item:!0,xs:!0,className:t.movieDetails},f.a.createElement(Y.a,{container:!0,direction:"column"},f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{variant:"h5",gutterBottom:!0},l.title)),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{className:t.inline,variant:"subtitle2",color:"textPrimary"},a("movie:originalTitle")),f.a.createElement(_.N,{className:t.inline,variant:"body2",color:"textPrimary"},l.original_title)),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{className:t.inline,variant:"subtitle2",color:"textPrimary"},a("movie:releaseDate")),f.a.createElement(_.N,{className:t.inline,variant:"body2",color:"textPrimary"},l.release_date)),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{className:t.inline,variant:"subtitle2",color:"textPrimary"},a("movie:runtime")),f.a.createElement(_.N,{className:t.inline,variant:"body2",color:"textPrimary"},l.runtime+" "+a("movie:minutes"))),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{className:t.inline,variant:"subtitle2",color:"textPrimary"},a("movie:rating")),f.a.createElement(_.N,{className:t.inline,variant:"body2",color:"textPrimary"},l.vote_average)),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{className:t.inline,variant:"subtitle2",color:"textPrimary"},a("movie:directors")),f.a.createElement(_.N,{className:t.inline,variant:"body2",color:"textPrimary"},l.credits.crew.directors.join(", "))),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{className:t.inline,variant:"subtitle2",color:"textPrimary"},a("movie:producers")),f.a.createElement(_.N,{className:t.inline,variant:"body2",color:"textPrimary"},l.credits.crew.producers.join(", "))),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{className:t.inline,variant:"subtitle2",color:"textPrimary"},a("movie:mainCast")),f.a.createElement(_.N,{className:t.inline,variant:"body2",color:"textPrimary"},l.credits.main_cast.join(", "))))))),!!l.overview&&f.a.createElement(Y.a,{item:!0,xs:!0,className:t.item},f.a.createElement(_.N,{variant:"body1"},l.overview)),this.renderStreamingButtons()),this.renderPlayer(),!i&&!l.trailer&&f.a.createElement(_.p,{className:t.divider}),f.a.createElement(Y.a,{container:!0,direction:"column",className:t.container},f.a.createElement(Y.a,{item:!0,className:t.commentForm},f.a.createElement("form",{noValidate:!0,autoComplete:"off"},f.a.createElement(Y.a,{container:!0,spacing:16,alignItems:"flex-start"},f.a.createElement(Y.a,{item:!0},U(o,t)),f.a.createElement(Y.a,{item:!0,xs:!0},f.a.createElement(_.M,{value:this.state.commentValue,onChange:this.handleInput,placeholder:a("movie:liveComment"),rowsMax:4,fullWidth:!0,multiline:!0})),n&&this.renderCommentSectionActions(t)))),f.a.createElement(Y.a,{item:!0,xs:!0},f.a.createElement(_.z,null,c.map(function(e,a){return f.a.createElement(_.A,{key:a,alignItems:"flex-start"},f.a.createElement(V.a,{className:t.link,to:"/user/"+e.uname},f.a.createElement(_.B,null,U(e,t))),f.a.createElement(_.D,{disableTypography:!0,primary:f.a.createElement(_.N,{component:"span",variant:"subtitle2",color:"textPrimary"},e.uname),secondary:f.a.createElement(f.a.Fragment,null,f.a.createElement(_.N,{className:t.commentText,component:"span",variant:"subtitle1",color:"textPrimary"},e.text),f.a.createElement(_.N,{component:"span",variant:"body2",color:"textSecondary"},Object(ae.distanceInWordsToNow)(new Date(e.dt)+"UTC",{addSuffix:!0})))}))}))))))))}}]),t}(b.Component))||n)||n)||n,ne=Object(A.withStyles)(function(e){return{root:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit,marginLeft:"auto",marginRight:"auto"},item:{margin:e.spacing.unit},media:{width:"100%"},playerContainer:{position:"relative",paddingTop:"calc((9 / 16) * 100%)",backgroundColor:"#000"},reactPlayer:{position:"absolute",top:0,left:0},container:{padding:2*e.spacing.unit},movieDetails:{minWidth:"300px",margin:e.spacing.unit},commentForm:Object(J.a)({paddingTop:2*e.spacing.unit,paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit},e.breakpoints.up(600),{paddingLeft:3*e.spacing.unit,paddingRight:3*e.spacing.unit}),commentText:{wordWrap:"break-word"},leftIcon:{marginRight:e.spacing.unit},inline:{display:"inline"},link:{textDecoration:"none",color:"white"},divider:{marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit}}})(re),ie=a(622),oe=a(624),se=a(625),le=(a(96),a(35)),ce=a.n(le),ue=a(36),me=a.n(ue),pe=a(31),de=a.n(pe),he=a(37),ge=a.n(he),be=a(99),fe=a.n(be),ve=Object(B.b)("AuthStore")(i=Object(B.c)(i=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).handleInput=a.handleInput.bind(Object(C.a)(Object(C.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentWillUnmount",value:function(){this.props.AuthStore.resetStore()}},{key:"handleInput",value:function(e){var t=this.props.AuthStore,a=e.target,r=a.name,n=a.value;t.setFieldValue(r,n)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.AuthStore.login()}},{key:"render",value:function(){var e=this.props.AuthStore,t=e.fields,a=e.errors,r=this.props,n=r.classes;r.t;return f.a.createElement("form",{onSubmit:this.handleSubmit},f.a.createElement($.a,{className:n.paper,elevation:1},f.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Log In"),f.a.createElement(ce.a,{error:!!a.uname,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"uname"},"Username"),f.a.createElement(de.a,{id:"uname",type:"text",name:"uname",value:t.uname,onChange:this.handleInput}),f.a.createElement(me.a,null,a.uname)),f.a.createElement(ce.a,{error:!!a.password,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"password"},"Password"),f.a.createElement(de.a,{id:"password",type:"password",name:"password",value:t.password,onChange:this.handleInput}),f.a.createElement(me.a,null,a.password)),f.a.createElement(L.a,{className:n.button,variant:"contained",color:"primary",type:"submit"},"Log In"),f.a.createElement("div",{className:"social"},f.a.createElement("a",{title:"42_Intra",className:n.intraIco,href:"http://localhost:8080/api/auth/intra/login"},f.a.createElement("img",{src:fe.a,height:"20"})),f.a.createElement("a",{title:"GitHub",href:"http://localhost:8080/api/auth/github/login"},f.a.createElement("i",{className:"fa fa-github"})),f.a.createElement("a",{title:"Google",href:"http://localhost:8080/api/auth/google/login"},f.a.createElement("i",{className:"fa fa-google-plus-circle ","aria-hidden":"true"}))),f.a.createElement(N.a,{variant:"body1",className:n.forgotPassword},f.a.createElement(V.a,{to:"/auth/lostpass",className:n.forgotPasswordLink},"Forgot password?"))))}}]),t}(b.Component))||i)||i,ye=Object(A.withStyles)({paper:{display:"flex",flexDirection:"column",maxWidth:400,padding:20,margin:"auto",marginTop:"6em"},button:{marginTop:15},authBtnsContainer:{display:"flex"},forgotPassword:{textAlign:"center"},forgotPasswordLink:{color:"black",textDecoration:"none"},intraIco:{padding:"10px"}})(ve),Ee=a(9),Oe=a.n(Ee),we=a(24),je={paper:{display:"flex",flexDirection:"column",maxWidth:400,padding:20,margin:"auto",marginTop:"6em"},button:{marginTop:15},buttonProgress:{color:W.a[500]}},ke=Object(B.b)("AuthStore")(o=Object(B.c)(o=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={isLoading:!1,isDialogOpen:!1},a.handleInput=a.handleInput.bind(Object(C.a)(Object(C.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(Object(C.a)(a))),a.handleDialogClose=a.handleDialogClose.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentWillUnmount",value:function(){this.props.AuthStore.resetStore()}},{key:"handleInput",value:function(e){var t=this.props.AuthStore,a=e.target,r=a.name,n=a.value;t.setFieldValue(r,n)}},{key:"handleSubmit",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),e.next=4,this.props.AuthStore.register();case 4:e.sent&&this.setState({isDialogOpen:!0}),this.setState({isLoading:!1});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDialogClose",value:function(e,t){this.setState({isDialogOpen:!1}),this.props.history.push("/auth/login")}},{key:"render",value:function(){var e=this.props.AuthStore,t=e.fields,a=e.errors,r=this.props,n=r.classes,i=(r.t,this.state),o=i.isLoading,s=i.isDialogOpen;return f.a.createElement(f.a.Fragment,null,f.a.createElement(_.k,{open:s,onClose:this.handleDialogClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},f.a.createElement(_.o,{id:"alert-dialog-title"},"Registration successfull"),f.a.createElement(_.m,null,f.a.createElement(_.n,{id:"alert-dialog-description"},"Please, check your email and follow the link we've sent to activate your account.")),f.a.createElement(_.l,null,f.a.createElement(L.a,{onClick:this.handleDialogClose,color:"primary",autoFocus:!0},"ok"))),f.a.createElement("form",{onSubmit:this.handleSubmit},f.a.createElement($.a,{className:n.paper,elevation:1},f.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Registration"),f.a.createElement(ce.a,{error:!!a.fname,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"fname"},"First Name"),f.a.createElement(de.a,{id:"fname",type:"text",name:"fname",value:t.fname,onChange:this.handleInput}),f.a.createElement(me.a,null,a.fname)),f.a.createElement(ce.a,{error:!!a.lname,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"lname"},"Last Name"),f.a.createElement(de.a,{id:"lname",type:"text",name:"lname",value:t.lname,onChange:this.handleInput}),f.a.createElement(me.a,null,a.lname)),f.a.createElement(ce.a,{error:!!a.uname,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"uname"},"Username"),f.a.createElement(de.a,{id:"uname",type:"text",name:"uname",value:t.uname,onChange:this.handleInput}),f.a.createElement(me.a,null,a.uname)),f.a.createElement(ce.a,{error:!!a.email,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"email"},"Email"),f.a.createElement(de.a,{id:"email",type:"email",name:"email",value:t.email,onChange:this.handleInput}),f.a.createElement(me.a,null,a.email)),f.a.createElement(ce.a,{error:!!a.password,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"password"},"Password"),f.a.createElement(de.a,{id:"password",type:"password",name:"password",value:t.password,onChange:this.handleInput}),f.a.createElement(me.a,null,a.password)),f.a.createElement(ce.a,{error:!!a.confirmPassword,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"confirmPassword"},"Confirm Password"),f.a.createElement(de.a,{id:"confirmPassword",type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:this.handleInput}),f.a.createElement(me.a,null,a.confirmPassword)),f.a.createElement(L.a,{disabled:o,className:n.button,variant:"contained",size:"large",color:"primary",type:"submit"},o?f.a.createElement(_.j,{size:24,className:n.buttonProgress}):"Register"))))}}]),t}(b.Component))||o)||o,Se=Object(A.withStyles)(je)(ke),Ce=Object(B.b)("AuthStore")(s=Object(B.c)(s=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={isLoading:!1,isDialogOpen:!1},a.handleInput=a.handleInput.bind(Object(C.a)(Object(C.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(Object(C.a)(a))),a.handleDialogClose=a.handleDialogClose.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentWillUnmount",value:function(){this.props.AuthStore.resetStore()}},{key:"handleInput",value:function(e){var t=this.props.AuthStore,a=e.target,r=a.name,n=a.value;t.setFieldValue(r,n)}},{key:"handleSubmit",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),e.next=4,this.props.AuthStore.lostPass();case 4:e.sent&&this.setState({isDialogOpen:!0}),this.setState({isLoading:!1});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDialogClose",value:function(e,t){console.log(t),this.setState({isDialogOpen:!1})}},{key:"render",value:function(){var e=this.props.AuthStore,t=e.fields,a=e.errors,r=this.props.classes,n=this.state,i=n.isLoading,o=n.isDialogOpen;return f.a.createElement(f.a.Fragment,null,f.a.createElement(_.k,{open:o,onClose:this.handleDialogClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},f.a.createElement(_.o,{id:"alert-dialog-title"},"Recovering email sent"),f.a.createElement(_.m,null,f.a.createElement(_.n,{id:"alert-dialog-description"},"Please, check your email and follow the link we've sent to recover your password.")),f.a.createElement(_.l,null,f.a.createElement(L.a,{onClick:this.handleDialogClose,color:"primary",autoFocus:!0},"ok"))),f.a.createElement("form",{onSubmit:this.handleSubmit},f.a.createElement($.a,{className:r.paper,elevation:1},f.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Lost Password"),f.a.createElement(ce.a,{error:!!a.email,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"email"},"Your Email"),f.a.createElement(de.a,{id:"email",type:"email",name:"email",value:t.email,onChange:this.handleInput}),f.a.createElement(me.a,null,a.email)),f.a.createElement(L.a,{disabled:i,className:r.button,variant:"contained",color:"primary",type:"submit"},i?f.a.createElement(_.j,{size:24,className:r.buttonProgress}):"Submit"))))}}]),t}(b.Component))||s)||s,Ae=Object(A.withStyles)({paper:{display:"flex",flexDirection:"column",maxWidth:400,padding:20,margin:"auto",marginTop:"6em"},button:{marginTop:15},authBtnsContainer:{display:"flex"}})(Ce),Pe=Object(B.b)("AuthStore")(l=Object(B.c)(l=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={isDialogOpen:!1},a.handleInput=a.handleInput.bind(Object(C.a)(Object(C.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(Object(C.a)(a))),a.handleDialogClose=a.handleDialogClose.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentWillUnmount",value:function(){this.props.AuthStore.resetStore()}},{key:"handleInput",value:function(e){var t=this.props.AuthStore,a=e.target,r=a.name,n=a.value;t.setFieldValue(r,n)}},{key:"handleSubmit",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.AuthStore.newPass();case 3:e.sent&&this.setState({isDialogOpen:!0});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDialogClose",value:function(e,t){console.log(t),this.setState({isDialogOpen:!1}),this.props.history.push("/auth/login")}},{key:"render",value:function(){var e=this.props.AuthStore,t=e.fields,a=e.errors,r=this.props.classes,n=this.state,i=(n.isLoading,n.isDialogOpen);return f.a.createElement(f.a.Fragment,null,f.a.createElement(_.k,{open:i,onClose:this.handleDialogClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},f.a.createElement(_.o,{id:"alert-dialog-title"},"Registration successfull"),f.a.createElement(_.m,null,f.a.createElement(_.n,{id:"alert-dialog-description"},"Your password has changed, please login.")),f.a.createElement(_.l,null,f.a.createElement(L.a,{onClick:this.handleDialogClose,color:"primary",autoFocus:!0},"ok"))),f.a.createElement($.a,{className:r.paper,elevation:1},f.a.createElement(N.a,{variant:"h5",gutterBottom:!0},"Password Recovery"),f.a.createElement(ce.a,{error:!!a.password,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"password"},"Password"),f.a.createElement(de.a,{id:"password",type:"password",name:"password",value:t.password,onChange:this.handleInput}),f.a.createElement(me.a,null,a.password)),f.a.createElement(ce.a,{error:!!a.confirmPassword,margin:"dense"},f.a.createElement(ge.a,{htmlFor:"confirmPassword"},"Confirm password"),f.a.createElement(de.a,{id:"confirmPassword",type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:this.handleInput}),f.a.createElement(me.a,null,a.confirmPassword)),f.a.createElement(L.a,{className:r.button,onClick:this.handleSubmit,variant:"contained",color:"primary"},"Submit")))}}]),t}(b.Component))||l)||l,xe=Object(A.withStyles)({paper:{display:"flex",flexDirection:"column",maxWidth:400,padding:20,margin:"auto",marginTop:"6em"},button:{marginTop:15},authBtnsContainer:{display:"flex"}})(Pe),De=Object(B.b)("SelfStore")(c=Object(B.c)(c=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.SelfStore,a=e.match;return console.log("us: ",t.self),t.self?f.a.createElement(ie.a,{to:"/"}):f.a.createElement(oe.a,null,f.a.createElement(se.a,{exact:!0,path:"".concat(a.path,"/login"),component:ye}),f.a.createElement(se.a,{exact:!0,path:"".concat(a.path,"/registration"),component:Se}),f.a.createElement(se.a,{exact:!0,path:"".concat(a.path,"/lostpass"),component:Ae}),f.a.createElement(se.a,{exact:!0,path:"".concat(a.path,"/lostpass/newpass"),component:xe}),f.a.createElement(ie.a,{to:"/auth/login"}))}}]),t}(b.Component))||c)||c,Me=a(260),Fe=a.n(Me),Ne=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.classes;return f.a.createElement(Y.a,{className:e.notFound},f.a.createElement("img",{src:Fe.a}))}}]),t}(b.Component),Ie=Object(A.withStyles)(function(e){return{notFound:{paddingTop:70,display:"flex",justifyContent:"center"}}})(Ne),Le=Object(B.b)("UserStore")(u=Object(B.c)(u=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentWillMount",value:function(){this.props.UserStore.pullUser(this.props.match.params.username)}},{key:"renderAvatar",value:function(e,t){return e.avatar?f.a.createElement(_.a,{className:t.avatar,src:"http://localhost:8080".concat(e.avatar)}):f.a.createElement(_.a,{className:t.avatar,src:e.avatar},"".concat(e.fname.charAt(0)).concat(e.lname.charAt(0)))}},{key:"render",value:function(){var e=this.props.classes,t=this.props.UserStore.user;return void 0===t?null:null===t?f.a.createElement(Ie,null):f.a.createElement("main",{className:e.layout},f.a.createElement(_.H,{className:e.paper},f.a.createElement(_.t,{className:e.container,container:!0,spacing:16},f.a.createElement(_.t,{className:e.avatarContainer,item:!0},this.renderAvatar(t,e)),f.a.createElement(_.t,{item:!0,className:e.mainUserInfo},f.a.createElement(_.N,{variant:"h6"},t.fname," ",t.lname),f.a.createElement(_.N,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0},t.uname),t.bio&&f.a.createElement(_.N,{variant:"subtitle1",paragraph:!0},t.bio)))))}}]),t}(b.Component))||u)||u,Be=Object(A.withStyles)(function(e){return{layout:Object(J.a)({width:"auto",marginLeft:2*e.spacing.unit,marginRight:2*e.spacing.unit},e.breakpoints.up(600+2*e.spacing.unit*2),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:3*e.spacing.unit,marginBottom:3*e.spacing.unit,padding:2*e.spacing.unit},container:{display:"flex",flexDirection:"column"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.grey,width:256,height:256},avatarContainer:{display:"flex",justifyContent:"center"},mainUserInfo:{margin:e.spacing.unit},editButton:{marginLeft:e.spacing.unit}}})(Le),_e={PaperProps:{style:{maxHeight:224,width:250}}},Qe={28:"action",12:"adventure",16:"animation",35:"comedy",80:"crime",99:"documentary",18:"drama",10751:"family",14:"fantasy",36:"history",27:"horror",10402:"music",9648:"mystery",10749:"romance",878:"scienceFiction",10770:"tvMovie",53:"thriller",10752:"war",37:"western"},Ue=Object(G.b)()(m=Object(B.b)("LibraryStore")(m=Object(B.c)(m=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).handleMovieClick=function(e){return function(t){a.props.LibraryStore._lastSelectedMovie=e}},a.deleteSelectedGenre=function(e){return function(){a.props.LibraryStore.deleteGenre(e),a.fetchMovies()}},a.state={queryString:""},a.handleSearchFormSubmit=a.handleSearchFormSubmit.bind(Object(C.a)(Object(C.a)(a))),a.handleGenreSelect=a.handleGenreSelect.bind(Object(C.a)(Object(C.a)(a))),a.renderGenreSelectValues=a.renderGenreSelectValues.bind(Object(C.a)(Object(C.a)(a))),a.deleteSelectedGenre=a.deleteSelectedGenre.bind(Object(C.a)(Object(C.a)(a))),a.handleFilterChange=a.handleFilterChange.bind(Object(C.a)(Object(C.a)(a))),a.disableSearchMode=a.disableSearchMode.bind(Object(C.a)(Object(C.a)(a))),a.renderHelpers=a.renderHelpers.bind(Object(C.a)(Object(C.a)(a))),a.renderMovies=a.renderMovies.bind(Object(C.a)(Object(C.a)(a))),a.renderLoadMoreButton=a.renderLoadMoreButton.bind(Object(C.a)(Object(C.a)(a))),a.fetchMovies=a.fetchMovies.bind(Object(C.a)(Object(C.a)(a))),a.handleMovieSearch=a.handleMovieSearch.bind(Object(C.a)(Object(C.a)(a))),a.handleLoadMore=a.handleLoadMore.bind(Object(C.a)(Object(C.a)(a))),a.handleMovieClick=a.handleMovieClick.bind(Object(C.a)(Object(C.a)(a))),a.searchField=f.a.createRef(),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.LibraryStore;e.movies||e.fetchMovies()}},{key:"handleSearchFormSubmit",value:function(e){e.preventDefault();var t=this.props.LibraryStore,a=this.state.queryString;a&&!t.isLoading&&(t.resetMovies(),t.setSearchMode(!0),t.setCurrentQuery(a),this.searchField.current.focus(),this.searchField.current.setSelectionRange(0,this.state.queryString.length),this.setState({genres:[]}),this.handleMovieSearch())}},{key:"fetchMovies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.props.LibraryStore.fetchMovies(e)}},{key:"handleMovieSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.props.LibraryStore.fetchSearchResults(e)}},{key:"handleLoadMore",value:function(e){this.props.LibraryStore.searchMode?this.handleMovieSearch(e+1):this.fetchMovies(e+1)}},{key:"disableSearchMode",value:function(){var e=this.props.LibraryStore;e.setSearchMode(!1),e.setCurrentQuery(void 0),e.resetMovies(),this.setState({queryString:""}),this.searchField.current.focus(),this.fetchMovies()}},{key:"handleFilterChange",value:function(e){var t=e.target,a=t.name,r=t.value;console.log("setting filter",a,r),this.props.LibraryStore.setFilter(a,r),this.fetchMovies()}},{key:"handleGenreSelect",value:function(e){this.props.LibraryStore.setGenres(e.target.value),this.fetchMovies()}},{key:"renderGenreSelectValues",value:function(e){var t=this,a=this.props,r=a.classes,n=a.t,i=this.props.LibraryStore.searchMode;return f.a.createElement("div",{className:r.chips},e.map(function(e){return f.a.createElement(_.i,{key:e,label:n("library:"+Qe[e]),className:r.chip,onDelete:i?void 0:t.deleteSelectedGenre(e)})}))}},{key:"renderHelpers",value:function(e){var t=this.props.LibraryStore,a=t.searchMode,r=t.currentQuery;return null===e?f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{variant:"subtitle2",color:"textSecondary"},"Error occured, try again")):!a&&e&&0===e.length?f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{variant:"subtitle2",color:"textSecondary"},"No results found")):a&&e&&0===e.length?f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{variant:"subtitle2",color:"textSecondary"},'No results found for "',r,'"')):a&&e?f.a.createElement(Y.a,{item:!0},f.a.createElement(_.N,{variant:"subtitle2",color:"textSecondary"},'Search results for "',r,'"')):void 0}},{key:"renderYearOptions",value:function(){var e,t=[];e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?"-01-01":"-12-31";for(var a=2026;a>=1874;a--){var r=a+e;t.push(f.a.createElement(_.G,{key:a,value:r},a))}return t}},{key:"renderMovieRating",value:function(e){var t=this.props.t;return e.vote_count>0?f.a.createElement(_.N,{variant:"caption",color:"textSecondary"},"".concat(t("library:rating")," - ").concat(e.vote_average,"/10")):f.a.createElement(_.N,{variant:"caption",color:"textSecondary"},t("library:noRating"))}},{key:"renderMovies",value:function(e){var t=this;if(e){var a=this.props,r=a.classes,n=a.t;return e.map(function(e,a){return f.a.createElement(Y.a,{item:!0,key:e.id},f.a.createElement(_.d,{className:r.card},f.a.createElement(_.e,{component:V.a,to:"/movie/".concat(e.id),onClick:t.handleMovieClick(a)},f.a.createElement(_.g,{component:"img",className:r.media,alt:e.title,height:"375",image:e.poster_path||"http://www.theprintworks.com/wp-content/themes/psBella/assets/img/film-poster-placeholder.png",title:e.title}),f.a.createElement(_.f,null,f.a.createElement(_.N,{variant:"subtitle2",noWrap:!0,color:e.watched_films_count>0?"textSecondary":"textPrimary"},e.title),f.a.createElement(_.N,{variant:"subtitle2",gutterBottom:!0,color:"textSecondary"},e.release_date.split("-")[0]||n("library:releaseDataUnknown")),t.renderMovieRating(e)))))})}}},{key:"renderLoadMoreButton",value:function(){var e=this,t=this.props,a=t.classes,r=t.LibraryStore,n=t.t,i=r.isLoading,o=r.movies,s=r.currentPage,l=r.totalPages;return i?f.a.createElement(Y.a,{container:!0,className:a.container,justify:"center"},f.a.createElement(Y.a,{item:!0},f.a.createElement(_.j,null))):o&&!i&&s<l?f.a.createElement(Y.a,{container:!0,className:a.container,justify:"center"},f.a.createElement(Y.a,{item:!0},f.a.createElement(_.b,{onClick:function(){return e.handleLoadMore(s)},variant:"outlined",size:"large",color:"primary"},n("library:loadMore")))):void 0}},{key:"render",value:function(){var e=this,t=this.state.queryString,a=this.props,r=a.classes,n=a.t,i=a.LibraryStore,o=i.isLoading,s=i.movies,l=i.filters,c=i.searchMode;return f.a.createElement("main",null,f.a.createElement(Y.a,{container:!0,className:r.layout,direction:"column"},f.a.createElement(Y.a,{container:!0,className:r.filtersContainer,wrap:"wrap",justify:"space-around",alignItems:"flex-end"},f.a.createElement(Y.a,{item:!0},f.a.createElement(Y.a,{container:!0,justify:"center",alignItems:"flex-end"},f.a.createElement(Y.a,{item:!0,className:r.filterItem},f.a.createElement(_.q,{disabled:c,className:r.formControl},f.a.createElement(_.y,{htmlFor:"sort_by"},n("library:sortBy")),f.a.createElement(_.K,{value:l.sort_by,onChange:this.handleFilterChange,input:f.a.createElement(_.w,{name:"sort_by",id:"sort_by"})},f.a.createElement(_.G,{value:"popularity.asc"},n("library:popularityAscending")),f.a.createElement(_.G,{value:"popularity.desc"},n("library:popularityDescending")),f.a.createElement(_.G,{value:"vote_average.asc"},n("library:ratingAscending")),f.a.createElement(_.G,{value:"vote_average.desc"},n("library:ratingDescending")),f.a.createElement(_.G,{value:"primary_release_date.asc"},n("library:releaseDateAscending")),f.a.createElement(_.G,{value:"primary_release_date.desc"},n("library:releaseDateDescending")),f.a.createElement(_.G,{value:"revenue.asc"},n("library:revenueAscending")),f.a.createElement(_.G,{value:"revenue.desc"},n("library:revenueDescending")),f.a.createElement(_.G,{value:"original_title.asc"},n("library:originalTitleAscending")),f.a.createElement(_.G,{value:"original_title.desc"},n("library:originalTitleDescending"))))),f.a.createElement(Y.a,{item:!0,className:r.filterItem},f.a.createElement(_.q,{disabled:c,className:r.formControl},f.a.createElement(_.y,{htmlFor:"select-multiple-chip"},n("library:genres")),f.a.createElement(_.K,{multiple:!0,value:l.with_genres,onChange:this.handleGenreSelect,input:f.a.createElement(_.w,{id:"select-multiple-chip"}),renderValue:this.renderGenreSelectValues,MenuProps:_e},Object.keys(Qe).map(function(e,t){return f.a.createElement(_.G,{key:t,value:e},f.a.createElement(_.h,{checked:l.with_genres.includes(e)}),f.a.createElement(_.D,{primary:n("library:"+Qe[e])}))})))),f.a.createElement(Y.a,{item:!0,className:r.filterItem},f.a.createElement(Y.a,{container:!0,spacing:8},f.a.createElement(Y.a,{item:!0},f.a.createElement(_.q,{disabled:c,className:r.formControl},f.a.createElement(_.y,{htmlFor:"primary_release_date_gte"},n("library:releaseYear")),f.a.createElement(_.K,{value:l["primary_release_date.gte"],onChange:this.handleFilterChange,displayEmpty:!0,input:f.a.createElement(_.w,{id:"primary_release_date_gte",name:"primary_release_date.gte",startAdornment:f.a.createElement(_.x,{position:"start"},">")})},f.a.createElement(_.G,{value:""},f.a.createElement("em",null,n("library:any"))),this.renderYearOptions(!0)))),f.a.createElement(Y.a,{item:!0},f.a.createElement(_.q,{disabled:c,className:r.formControl},f.a.createElement(_.y,{htmlFor:"primary_release_date_lte"},n("library:releaseYear")),f.a.createElement(_.K,{value:l["primary_release_date.lte"],onChange:this.handleFilterChange,displayEmpty:!0,input:f.a.createElement(_.w,{id:"primary_release_date_lte",name:"primary_release_date.lte",startAdornment:f.a.createElement(_.x,{position:"start"},"<")})},f.a.createElement(_.G,{value:""},f.a.createElement("em",null,n("library:any"))),this.renderYearOptions(!1)))))),f.a.createElement(Y.a,{item:!0,className:r.filterItem},f.a.createElement(_.q,{disabled:c,className:r.formControl},f.a.createElement(_.y,{shrink:!0,htmlFor:"vote_average"},n("library:rating")),f.a.createElement(_.K,{value:l["vote_average.gte"],onChange:this.handleFilterChange,displayEmpty:!0,input:f.a.createElement(_.w,{name:"vote_average.gte",id:"vote_average"})},f.a.createElement(_.G,{value:""},f.a.createElement("em",null,n("library:any"))),["1+","2+","3+","4+","5+","6+","7+","8+","9+"].map(function(e,t){return f.a.createElement(_.G,{key:t,value:e.charAt(0)},e)})))))),f.a.createElement(Y.a,{item:!0,className:r.filterItem},f.a.createElement("form",{onSubmit:this.handleSearchFormSubmit},f.a.createElement(_.q,null,f.a.createElement(_.w,{id:"search-field",type:"text",name:"queryString",placeholder:n("library:search")+"...",value:t,startAdornment:f.a.createElement(_.x,{position:"start"},f.a.createElement(_.u,null,"search")),onChange:function(t){return e.setState({queryString:t.target.value})},inputRef:this.searchField}))))),f.a.createElement(Y.a,{container:!0,className:r.filtersContainer,wrap:"wrap",justify:"center",alignItems:"center",zeroMinWidth:!0},this.renderHelpers(s,o),c&&!o&&f.a.createElement(Y.a,{item:!0,className:r.backButton},f.a.createElement(_.c,{focusRipple:!0,onClick:this.disableSearchMode},f.a.createElement(_.u,{color:"action"},"close")))),f.a.createElement(Y.a,{container:!0,className:r.container,wrap:"wrap",justify:"center",zeroMinWidth:!0},this.renderMovies(s)),this.renderLoadMoreButton()))}}]),t}(b.Component))||m)||m)||m,Ge=Object(A.withStyles)(function(e){return{layout:{marginLeft:"auto",marginRight:"auto",marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},container:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},filtersContainer:{marginTop:2*e.spacing.unit},filterItem:{margin:2*e.spacing.unit},card:{width:250,margin:e.spacing.unit},formControl:{minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4},media:{objectFit:"cover"},backButton:{margin:e.spacing.unit},yearInput:{textAlign:"center"}}})(Ue),Ve=a(623),Te=a(100),Re=a.n(Te),ze=a(261),We=a.n(ze),qe=Object(G.b)()(p=Object(B.b)("SelfStore")(p=Object(B.c)(p=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={error:"",snackbarOpen:!1},a.onFileChange=a.onFileChange.bind(Object(C.a)(Object(C.a)(a))),a.importPictureFromSocial=a.importPictureFromSocial.bind(Object(C.a)(Object(C.a)(a))),a.deleteCurrentPicture=a.deleteCurrentPicture.bind(Object(C.a)(Object(C.a)(a))),a.handleSnackbarClose=a.handleSnackbarClose.bind(Object(C.a)(Object(C.a)(a))),a.fileInput=f.a.createRef(),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"onFileChange",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a,r,n,i,o,s;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,r=a.SelfStore,n=a.t,i=t.target.files[0],t.target.value="",!(i&&i.size<3e6)){e.next=20;break}return e.prev=4,e.next=7,Q(i);case 7:return o=e.sent,e.next=10,r.updateProfile("avatar",o);case 10:(s=e.sent).success||this.setState({snackbarOpen:!0,error:s.error}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),this.setState({error:n("settingsPage:imageProcessingFailed"),snackbarOpen:!0}),console.error(e.t0);case 18:e.next=21;break;case 20:this.setState({error:n("settingsPage:tooBigFile"),snackbarOpen:!0});case 21:case"end":return e.stop()}},e,this,[[4,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"importPictureFromSocial",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.SelfStore.importPictureFromSocial();case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCurrentPicture",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.props.SelfStore).self.avatar){e.next=5;break}return console.log("deleting picture..."),e.next=5,a.updateProfile("avatar","");case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSnackbarClose",value:function(e,t){this.setState({snackbarOpen:!1})}},{key:"renderSnackBar",value:function(){var e=this.state,t=e.error,a=e.snackbarOpen;return f.a.createElement(_.L,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:6e3,onClose:this.handleSnackbarClose,message:f.a.createElement("span",null,"Error: ",t),action:[f.a.createElement(_.v,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},f.a.createElement(_.u,null,"close"))]})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.t,n=this.props.SelfStore.self;return f.a.createElement(f.a.Fragment,null,this.renderSnackBar(),f.a.createElement(_.H,{className:a.paper},f.a.createElement(_.z,{disablePadding:!0,subheader:f.a.createElement(_.E,{disableSticky:!0,color:"primary"},r("settingsPage:avatar"))},f.a.createElement(_.A,{divider:!0,className:a.avatarContainer},U(n,a)),f.a.createElement(_.A,{divider:!0,button:!0,onClick:function(){e.fileInput.current.click()}},f.a.createElement(_.C,null,f.a.createElement(_.u,null,"cloud_upload")),f.a.createElement(_.D,{primary:r("settingsPage:uploadPicture")})),n.social_provider&&f.a.createElement(_.A,{divider:!0,button:!0,onClick:this.importPictureFromSocial.bind(this)},f.a.createElement(_.C,null,f.a.createElement(_.u,null,"get_app")),f.a.createElement(_.D,{primary:r("settingsPage:importPicture")+" "+n.social_provider})),f.a.createElement(_.A,{button:!0,onClick:this.deleteCurrentPicture.bind(this)},f.a.createElement(_.C,null,f.a.createElement(_.u,null,"delete")),f.a.createElement(_.D,{primary:r("settingsPage:deletePicture")}))),f.a.createElement("input",{style:{display:"none"},onChange:this.onFileChange,ref:this.fileInput,type:"file",accept:"image/*"})))}}]),t}(b.Component))||p)||p)||p,Ke=Object(A.withStyles)(function(e){return{paper:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit,padding:0},avatarContainer:{display:"flex",justifyContent:"center"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.grey,width:256,height:256}}})(qe),He=a(68),Je=Object(G.b)()(d=Object(B.b)("SelfStore")(d=Object(B.c)(d=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={isLoading:!1,isDialogOpen:!1,selectedField:"fname",inputValue:"",inputError:""},a.handleItemClick=a.handleItemClick.bind(Object(C.a)(Object(C.a)(a))),a.handleInput=a.handleInput.bind(Object(C.a)(Object(C.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(C.a)(Object(C.a)(a))),a.saveFieldValue=a.saveFieldValue.bind(Object(C.a)(Object(C.a)(a))),a.handleDialogClose=a.handleDialogClose.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.saveFieldValue()}},{key:"handleItemClick",value:function(e){var t=this.props.SelfStore.self,a=e.currentTarget.id;this.setState({selectedField:a,isDialogOpen:!0,inputValue:t[a],inputError:""})}},{key:"handleInput",value:function(e){this.setState({inputValue:e.target.value,inputError:""})}},{key:"handleDialogClose",value:function(e,t){this.setState({isDialogOpen:!1})}},{key:"isValidField",value:function(e,t){var a=function(e,t){var a={isValid:!0,error:""};return"uname"===e?t.length<6?(a.error="Username is too short.",a.isValid=!1):t.length>16&&(a.error="Username is too long",a.isValid=!1):"fname"===e?t.length<1?(a.error="First name is too short.",a.isValid=!1):t.length>50&&(a.error="First name is too long",a.isValid=!1):"lname"===e?t.length<1?(a.error="Last name is too short.",a.isValid=!1):t.length>50&&(a.error="Last name is too long",a.isValid=!1):"bio"===e&&t.length>200?(a.error="Bio is too long.",a.isValid=!1):"email"!==e||He.validate(t)||(a.error="Email is invalid.",a.isValid=!1),a}(e,t);return!!a.isValid||(this.setState({inputError:a.error}),!1)}},{key:"saveFieldValue",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a,r,n,i,o;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.SelfStore.self,r=this.state,n=r.selectedField,null!==(i=r.inputValue)){e.next=4;break}return e.abrupt("return");case 4:if((i=i.trim())!==a[n]){e.next=8;break}return this.setState({isDialogOpen:!1}),e.abrupt("return");case 8:if(!this.isValidField(n,i)){e.next=15;break}return this.setState({isLoading:!0}),e.next=12,this.props.SelfStore.updateProfile(n,i);case 12:o=e.sent,console.log(o),o.success?this.setState({isLoading:!1,isDialogOpen:!1}):this.setState({isLoading:!1,inputError:o.error});case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderInputDialog",value:function(e){var t=this.state,a=t.isLoading,r=t.isDialogOpen,n=t.selectedField,i=t.inputError,o=t.inputValue;return f.a.createElement(_.k,{open:r,onClose:this.handleDialogClose,"aria-labelledby":"form-dialog-title",fullWidth:!0},f.a.createElement(_.o,{id:"form-dialog-title"},e("settingsPage:changeField")," ",e("settingsPage:"+n).toLowerCase()),f.a.createElement(_.m,null,f.a.createElement("form",{onSubmit:this.handleFormSubmit.bind(this)},f.a.createElement(_.q,{error:!!i,fullWidth:!0},f.a.createElement(_.y,{htmlFor:n},e("settingsPage:"+n)),f.a.createElement(_.w,{id:n,type:"text",name:n,value:o||"",autoFocus:!0,onChange:this.handleInput,multiline:"bio"===n}),f.a.createElement(_.s,null,i)))),f.a.createElement(_.l,null,f.a.createElement(_.b,{onClick:this.handleDialogClose,color:"primary"},e("settingsPage:cancel")),f.a.createElement(_.b,{disabled:a,onClick:this.saveFieldValue,color:"primary"},a?f.a.createElement(_.j,{size:18}):e("settingsPage:save"))))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,r=this.props.SelfStore.self;return f.a.createElement(f.a.Fragment,null,this.renderInputDialog(a),f.a.createElement(_.H,{className:t.paper},f.a.createElement(_.z,{disablePadding:!0,subheader:f.a.createElement(_.E,{disableSticky:!0,color:"primary"},a("settingsPage:profile"))},f.a.createElement(_.A,{id:"fname",button:!0,divider:!0,onClick:this.handleItemClick},f.a.createElement(_.D,{primary:r.fname||a("settingsPage:none"),secondary:a("settingsPage:fname")})),f.a.createElement(_.A,{id:"lname",button:!0,divider:!0,onClick:this.handleItemClick},f.a.createElement(_.D,{primary:r.lname||a("settingsPage:none"),secondary:a("settingsPage:lname")})),f.a.createElement(_.A,{id:"uname",button:!0,divider:!0,onClick:this.handleItemClick},f.a.createElement(_.D,{primary:r.uname,secondary:a("settingsPage:uname")})),f.a.createElement(_.A,{id:"bio",button:!0,onClick:this.handleItemClick},f.a.createElement(_.D,{primary:r.bio||a("settingsPage:none"),secondary:a("settingsPage:bio")})))))}}]),t}(b.Component))||d)||d)||d,Xe=Object(A.withStyles)(function(e){return{paper:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit,padding:0}}})(Je),Ye=Object(G.b)()(h=Object(B.b)("SelfStore")(h=Object(B.c)(h=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={isLoading:!1,emailDialogOpen:!1,passwordDialogOpen:!1,email:"",old_password:"",new_password:"",confirm:"",errors:{}},a.handleItemClick=a.handleItemClick.bind(Object(C.a)(Object(C.a)(a))),a.handleInput=a.handleInput.bind(Object(C.a)(Object(C.a)(a))),a.closeDialogs=a.closeDialogs.bind(Object(C.a)(Object(C.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(C.a)(Object(C.a)(a))),a.updateEmail=a.updateEmail.bind(Object(C.a)(Object(C.a)(a))),a.updatePassword=a.updatePassword.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.emailDialogOpen,r=t.passwordDialogOpen;a?this.updateEmail():r&&this.updatePassword()}},{key:"handleItemClick",value:function(e){var t=e.currentTarget.id;if("email"===t){var a=this.props.SelfStore.self;this.setState({emailDialogOpen:!0,email:a.email||"",errors:{}})}else"password"===t&&this.setState({passwordDialogOpen:!0,errors:{}})}},{key:"closeDialogs",value:function(e){this.setState({emailDialogOpen:!1,passwordDialogOpen:!1})}},{key:"handleInput",value:function(e){var t,a=e.target,r=a.value,n=a.name;this.setState((t={},Object(J.a)(t,n,r),Object(J.a)(t,"errors",Object(J.a)({},n,"")),t))}},{key:"updateEmail",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a,r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.email,!Object(He.validate)(t)){e.next=12;break}return this.setState({isLoading:!0}),a=this.props.SelfStore,e.next=7,a.updateEmail(t);case 7:(r=e.sent).success?this.closeDialogs():this.setState({errors:{email:r.error}}),this.setState({isLoading:!1}),e.next=13;break;case 12:this.setState({errors:{email:"Email is invalid"}});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updatePassword",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a,r,n,i;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.old_password,r=t.new_password,n=t.confirm,r===n){e.next=3;break}return e.abrupt("return",this.setState({errors:{confirm:"Passwords doesn't match"}}));case 3:return this.setState({isLoading:!0}),e.next=6,this.props.SelfStore.updatePassword(a,r);case 6:i=e.sent,this.setState({isLoading:!1}),i.success?(this.closeDialogs(),this.setState({old_password:"",new_password:"",confirm:""})):this.setState({errors:i.error});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderPasswordDialog",value:function(e){var t=this.state,a=t.isLoading,r=t.passwordDialogOpen,n=t.old_password,i=t.new_password,o=t.confirm,s=t.errors;return f.a.createElement(_.k,{open:r,onClose:this.closeDialogs,"aria-labelledby":"password-dialog-title",fullWidth:!0},f.a.createElement(_.o,{id:"password-dialog-title"},e("settingsPage:changePassword")),f.a.createElement(_.m,null,f.a.createElement("form",{onSubmit:this.handleFormSubmit},f.a.createElement(_.q,{error:!!s.old_password,margin:"dense",required:!0,fullWidth:!0},f.a.createElement(_.y,{htmlFor:"old_password"},e("settingsPage:currentPassword")),f.a.createElement(_.w,{type:"password",name:"old_password",value:n,autoFocus:!0,onChange:this.handleInput}),f.a.createElement(_.s,null,s.old_password)),f.a.createElement(_.q,{error:!!s.new_password,margin:"dense",required:!0,fullWidth:!0},f.a.createElement(_.y,{htmlFor:"new_password"},e("settingsPage:newPassword")),f.a.createElement(_.w,{type:"password",name:"new_password",value:i,onChange:this.handleInput}),f.a.createElement(_.s,null,s.new_password)),f.a.createElement(_.q,{error:!!s.confirm,margin:"dense",required:!0,fullWidth:!0},f.a.createElement(_.y,{htmlFor:"confirm"},e("settingsPage:confirmPassword")),f.a.createElement(_.w,{type:"password",name:"confirm",value:o,onChange:this.handleInput}),f.a.createElement(_.s,null,s.confirm)))),f.a.createElement(_.l,null,f.a.createElement(_.b,{onClick:this.closeDialogs,color:"primary"},e("settingsPage:cancel")),f.a.createElement(_.b,{disabled:a,onClick:this.updatePassword,color:"primary"},a?f.a.createElement(_.j,{size:18}):e("settingsPage:save"))))}},{key:"renderEmailDialog",value:function(e){var t=this.state,a=t.isLoading,r=t.emailDialogOpen,n=t.email,i=t.errors;return f.a.createElement(_.k,{open:r,onClose:this.closeDialogs,"aria-labelledby":"email-dialog-title",fullWidth:!0},f.a.createElement(_.o,{id:"email-dialog-title"},e("settingsPage:emailAddress")),f.a.createElement(_.m,null,f.a.createElement(_.n,null,e("settingsPage:emailDialog")),f.a.createElement("form",{onSubmit:this.handleFormSubmit},f.a.createElement(_.q,{error:!!i.email,margin:"normal",required:!0,fullWidth:!0},f.a.createElement(_.y,{htmlFor:"email"},e("settingsPage:email")),f.a.createElement(_.w,{id:"email",type:"email",name:"email",value:n,autoFocus:!0,onChange:this.handleInput}),f.a.createElement(_.s,null,i.email)))),f.a.createElement(_.l,null,f.a.createElement(_.b,{onClick:this.closeDialogs,color:"primary"},e("settingsPage:cancel")),f.a.createElement(_.b,{disabled:a,onClick:this.updateEmail,color:"primary"},a?f.a.createElement(_.j,{size:18}):e("settingsPage:ok"))))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,r=this.props.SelfStore.self;return f.a.createElement(f.a.Fragment,null,this.renderEmailDialog(a),this.renderPasswordDialog(a),f.a.createElement(_.H,{className:t.paper},f.a.createElement(_.z,{disablePadding:!0,subheader:f.a.createElement(_.E,{disableSticky:!0,color:"primary"},a("settingsPage:account"))},!r.social_provider&&f.a.createElement(_.A,{id:"password",button:!0,divider:!0,onClick:this.handleItemClick},f.a.createElement(_.D,{primary:a("settingsPage:changePassword")})),f.a.createElement(_.A,{id:"email",button:!0,onClick:this.handleItemClick},f.a.createElement(_.D,{primary:a("settingsPage:changeEmail")})))))}}]),t}(b.Component))||h)||h)||h,Ze=Object(A.withStyles)(function(e){return{paper:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit,padding:0}}})(Ye),$e=Object(G.b)()(g=Object(B.b)("SelfStore")(g=Object(B.c)(g=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(j.a)(this,Object(k.a)(t).call(this,e))).state={isLoading:!1,dialogOpen:!1,value:""},a.openDialog=a.openDialog.bind(Object(C.a)(Object(C.a)(a))),a.handleDialogClose=a.handleDialogClose.bind(Object(C.a)(Object(C.a)(a))),a.updateLocale=a.updateLocale.bind(Object(C.a)(Object(C.a)(a))),a}return Object(S.a)(t,e),Object(w.a)(t,[{key:"handleFormSubmit",value:function(e){e.preventDefault()}},{key:"handleDialogClose",value:function(e,t){this.setState({dialogOpen:!1})}},{key:"openDialog",value:function(e){var t=this.props.SelfStore.self;this.setState({dialogOpen:!0,value:t.locale})}},{key:"updateLocale",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.value,a=this.props.SelfStore,t!==a.self.locale){e.next=6;break}return e.abrupt("return");case 6:return this.setState({isLoading:!0}),e.next=9,a.updateLocale(t);case 9:this.setState({isLoading:!1}),this.handleDialogClose();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderDialog",value:function(e){var t=this,a=this.state,r=a.dialogOpen,n=a.value,i=a.isLoading;return f.a.createElement(_.k,{open:r,onClose:this.handleDialogClose,"aria-labelledby":"locale-dialog-title",maxWidth:"xs"},f.a.createElement(_.o,{id:"locale-dialog-title"},e("settingsPage:language")),f.a.createElement(_.m,null,f.a.createElement("form",{onSubmit:this.handleFormSubmit.bind(this)},f.a.createElement(_.J,{"aria-label":"Language",name:"locale",value:n,onChange:function(e,a){return t.setState({value:a})}},f.a.createElement(_.r,{value:"en",control:f.a.createElement(_.I,null),label:"English"}),f.a.createElement(_.r,{value:"ru",control:f.a.createElement(_.I,null),label:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"})))),f.a.createElement(_.l,null,f.a.createElement(_.b,{onClick:this.handleDialogClose,color:"primary"},e("settingsPage:cancel")),f.a.createElement(_.b,{disabled:i,onClick:this.updateLocale,color:"primary"},i?f.a.createElement(_.j,{size:18}):e("settingsPage:save"))))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,r="en"===this.props.SelfStore.self.locale?"English":"\u0420\u0443\u0441\u0441\u043a\u0438\u0439";return f.a.createElement(f.a.Fragment,null,this.renderDialog(a),f.a.createElement(_.H,{className:t.paper},f.a.createElement(_.z,{disablePadding:!0,subheader:f.a.createElement(_.E,{disableSticky:!0,color:"primary"},a("settingsPage:other"))},f.a.createElement(_.A,{id:"locale",button:!0,onClick:this.openDialog},f.a.createElement(_.D,{primary:r,secondary:a("settingsPage:language")})))))}}]),t}(b.Component))||g)||g)||g,et=Object(A.withStyles)(function(e){return{paper:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit,padding:0}}})($e),tt=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.classes;return f.a.createElement("main",{className:e.layout},f.a.createElement(_.t,{className:e.container,container:!0,spacing:0},f.a.createElement(_.t,{item:!0,xs:12},f.a.createElement(Ke,null)),f.a.createElement(_.t,{item:!0,xs:12},f.a.createElement(Xe,null)),f.a.createElement(_.t,{item:!0,xs:12},f.a.createElement(Ze,null)),f.a.createElement(_.t,{item:!0,xs:12},f.a.createElement(et,null))))}}]),t}(f.a.Component),at=Object(A.withStyles)(function(e){return{layout:Object(J.a)({width:"auto"},e.breakpoints.up(600),{width:600,marginLeft:"auto",marginRight:"auto"}),container:{display:"flex",flexDirection:"column",marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},paper:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit,padding:0}}})(tt),rt=a(149);rt.a.init({debug:!0,lng:"en",resources:{en:{settingsPage:{other:"Other",language:"Language",cancel:"Cancel",save:"Save",account:"Account",changePassword:"Change password",currentPassword:"Current password",newPassword:"New password",confirmPassword:"Confirm new password",changeEmail:"Change Email",fname:"First Name",lname:"Last Name",uname:"Username",bio:"Bio",none:"None",profile:"Profile",changeField:"Change",email:"Email",emailAddress:"Email address",emailDialog:"New email address will be saved only if you confirmed it by following our confirmation link.",ok:"ok",avatar:"Avatar",importPicture:"Import picture from",uploadPicture:"Upload new picture",deletePicture:"Delete current picture",imageProcessingFailed:"image processing failed, please try again",tooBigFile:"file is too big, max size is 3MB"},header:{settings:"Settings",logout:"Logout",register:"Register",login:"Login",Username:"Username"},library:{sortBy:"Sort By",popularityAscending:"popularity ascending",popularityDescending:"popularity descending",ratingAscending:"rating ascending",ratingDescending:"rating descending",releaseDateAscending:"release date ascending",releaseDateDescending:"release date descending",revenueAscending:"revenue ascending",revenueDescending:"revenue descending",originalTitleAscending:"original title ascending",originalTitleDescending:"original title descending",genres:"Genres",releaseYear:"Release year",any:"Any",search:"Search",close:"Close",rating:"Rating",noRating:"No rating",action:"Action",adventure:"Adventure",animation:"animation",comedy:"comedy",crime:"crime",documentary:"documentary",drama:"drama:",family:"family",fantasy:"fantasy",history:"history",horror:"Horror",music:"music",mystery:"mystery",romance:"romance",scienceFiction:"scienceFiction",tvMovie:"tvMovie",thriller:"thriller",war:"war:",western:"western",releaseDataUnknown:"Release date unknown",loadMore:"Load more"},movie:{unavailable:"This movie is unavailable",stream:"STREAM IN",cancel:"Cancel",send:"Send",originalTitle:"Original title: ",releaseDate:"Release date: ",runtime:"Runtime: ",rating:"Rating: ",liveComment:"Leave a comment",directors:"Directors: ",producers:"Producers: ",mainCast:"Main cast: ",streamIn:"Stream in",minutes:"minutes"},login:{logIn:"log In",username:"Username",password:"Password",forgotPassword:"Forgot password ?"},registration:{checkEmail:"Please, check your email and follow the link we'\ve sent to activate your account.",ok:"ok",registration:"Registration",username:"Username",email:"Email",confirmPassword:"Confirm Password"}},ru:{settingsPage:{other:"\u0414\u0440\u0443\u0433\u043e\u0435",language:"\u042f\u0437\u044b\u043a",cancel:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",account:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",changePassword:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",currentPassword:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",newPassword:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",confirmPassword:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",changeEmail:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0447\u0442\u0443",fname:"\u0418\u043c\u044f",lname:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",uname:"\u041b\u043e\u0433\u0438\u043d",bio:"\u0411\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u044f",none:"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",changeField:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435",email:"\u041f\u043e\u0447\u0442\u0430",emailAddress:"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441",emailDialog:"\u041d\u043e\u0432\u0438\u0439 \u043f\u043e\u0447\u0442\u043e\u0432\u0438\u0439 \u0430\u0434\u0440\u0435\u0441 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0435\u0433\u043e \u043f\u0435\u0440\u0435\u0439\u0434\u044f \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u044b \u0442\u0443\u0434\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438",ok:"\u043e\u043a",avatar:"\u0410\u0432\u0430\u0442\u0430\u0440",importPicture:"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u0437",uploadPicture:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",deletePicture:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",imageProcessingFailed:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",tooBigFile:"\u0424\u0430\u0439\u043b \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 - 3MB"},header:{settings:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",logout:"\u0412\u044b\u0445\u043e\u0434",register:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",login:"\u0412\u0445\u043e\u0434"},library:{sortBy:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e",popularityAscending:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438",popularityDescending:"\u0423\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438",ratingAscending:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0430",ratingDescending:"\u0423\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0430",releaseDateAscending:"\u0414\u0430\u0442\u0435 \u0432\u044b\u0445\u043e\u0434\u0430, \u043d\u043e\u0432\u044b\u0435 \u0432 \u043d\u0430\u0447\u0430\u043b\u0435",releaseDateDescending:"\u0414\u0430\u0442\u0435 \u0432\u044b\u0445\u043e\u0434\u0430, \u043d\u043e\u0432\u044b\u0435 \u0432 \u043a\u043e\u043d\u0446\u0435",revenueAscending:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0441\u0431\u043e\u0440\u043e\u0432",revenueDescending:"\u0423\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0441\u0431\u043e\u0440\u043e\u0432",originalTitleAscending:"\u0410\u043b\u0444\u0430\u0432\u0438\u0442\u0443 (\u0410-\u042f)",originalTitleDescending:"\u0410\u043b\u0444\u0430\u0432\u0438\u0442\u0443 (\u042f-\u0410)",genres:"\u0416\u0430\u043d\u0440\u044b",releaseYear:"\u0413\u043e\u0434 \u0432\u044b\u0445\u043e\u0434\u0430",any:"\u041b\u044e\u0431\u043e\u0439",search:"\u041f\u043e\u0438\u0441\u043a",close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",rating:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",noRating:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",action:"\u042d\u043a\u0448\u043d",adventure:"\u041f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f",animation:"\u0410\u043d\u0438\u043c\u0430\u0446\u0438\u0438",comedy:"\u041a\u043e\u043c\u0435\u0434\u0438\u044f",crime:"\u041a\u0440\u0438\u043c\u0438\u043d\u0430\u043b",documentary:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0435",drama:"\u0414\u0440\u0430\u043c\u0430",family:"\u0421\u0435\u043c\u0435\u0439\u043d\u044b\u0435",fantasy:"\u0424\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430",history:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",horror:"\u0423\u0436\u0430\u0441\u044b",music:"\u041c\u044e\u0437\u0438\u043a\u043b\u044b",mystery:"\u041c\u0438\u0441\u0442\u0438\u043a\u0430",romance:"\u0420\u043e\u043c\u0430\u043d\u044b",scienceFiction:"\u041d\u0430\u0443\u0447\u043d\u0430\u044f \u0444\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430",tvMovie:"\u0422\u0435\u043b\u0435\u0441\u0435\u0440\u0438\u0430\u043b\u044b",thriller:"\u0422\u0440\u0438\u043b\u043b\u0435\u0440",war:"\u0412\u043e\u0435\u043d\u043d\u044b\u0435",western:"\u0412\u0435\u0441\u0442\u0435\u0440\u043d",releaseDataUnknown:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430",loadMore:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"},movie:{unavailable:"\u042d\u0442\u043e\u0442 \u0444\u0438\u043b\u044c\u043c \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d",stream:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 ",cancel:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",send:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",originalTitle:"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",releaseDate:"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430: ",runtime:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c : ",rating:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",liveComment:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",directors:"\u0420\u0435\u0436\u0438\u0441\u0441\u0435\u0440\u044b: ",producers:"\u041f\u0440\u043e\u0434\u044e\u0441\u0435\u0440\u044b: ",mainCast:"\u0412 \u0433\u043b\u0430\u0432\u043d\u044b\u0445 \u0440\u043e\u043b\u044f\u0445: ",streamIn:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432",minutes:"\u043c\u0438\u043d\u0443\u0442"},login:{logIn:"\u041b\u043e\u0433\u0438\u043d",username:"\u0418\u043c\u044f",password:"\u041f\u0430\u0440\u043e\u043b\u044c",forgotPassword:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"},registration:{checkEmail:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u043e\u0447\u0442\u0443 \u0438 \u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438 \u0412\u0430\u0448\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430",ok:"\u043e\u043a",registration:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",username:"\u0418\u043c\u044f",email:"\u0415\u043c\u0435\u0439\u043b",confirmPassword:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}}}});var nt,it,ot=rt.a,st=Object(A.createMuiTheme)({palette:{primary:We.a},typography:{useNextVariants:!0}}),lt=Object(B.b)("SelfStore")(nt=Object(B.c)(nt=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.props.SelfStore.pullSelf()}},{key:"render",value:function(){return void 0===this.props.SelfStore.self?null:f.a.createElement(G.a,{i18n:ot},f.a.createElement(A.MuiThemeProvider,{theme:st},f.a.createElement(Ve.a,null,f.a.createElement(f.a.Fragment,null,f.a.createElement(Re.a,null),f.a.createElement(R,null),f.a.createElement(oe.a,null,f.a.createElement(se.a,{path:"/auth",component:De}),f.a.createElement(ct,{exact:!0,path:"/",component:Ge}),f.a.createElement(ct,{exact:!0,path:"/user/:username",component:Be}),f.a.createElement(ct,{exact:!0,path:"/settings",component:at}),f.a.createElement(ct,{exact:!0,path:"/movie/:id([0-9]*)",component:ne}),f.a.createElement(se.a,{path:"*",component:Ie})),f.a.createElement(H,null)))))}}]),t}(b.Component))||nt)||nt,ct=Object(B.b)("SelfStore")(it=Object(B.c)(it=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.SelfStore,a=e.component,r=Object(E.a)(e,["SelfStore","component"]);return f.a.createElement(se.a,Object.assign({},r,{render:function(e){return t.self?f.a.createElement(a,e):f.a.createElement(ie.a,{to:"/auth/login"})}}))}}]),t}(b.Component))||it)||it,ut=lt;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mt,pt,dt,ht,gt,bt,ft,vt,yt,Et,Ot,wt,jt,kt,St,Ct,At,Pt,xt,Dt,Mt=a(262),Ft=a(32),Nt=a(15),It=(a(80),a(10)),Lt=a(30),Bt=a.n(Lt),_t=a(264),Qt=new(mt=function(){function e(){Object(O.a)(this,e),this._lastSelectedMovie=void 0,Object(Ft.a)(this,"isLoading",pt,this),Object(Ft.a)(this,"searchMode",dt,this),Object(Ft.a)(this,"currentQuery",ht,this),Object(Ft.a)(this,"movies",gt,this),Object(Ft.a)(this,"currentPage",bt,this),Object(Ft.a)(this,"totalPages",ft,this),Object(Ft.a)(this,"filters",vt,this)}return Object(w.a)(e,[{key:"setIsLoading",value:function(e){this.isLoading=e}},{key:"setSearchMode",value:function(e){this.searchMode=e}},{key:"setCurrentQuery",value:function(e){this.currentQuery=e}},{key:"setPage",value:function(e){this.currentPage=e}},{key:"setTotalPages",value:function(e){this.totalPages=e}},{key:"setFilter",value:function(e,t){this.filters[e]=t}},{key:"setMovies",value:function(e){this.movies=e}},{key:"pushMovies",value:function(e){var t;(t=this.movies).push.apply(t,Object(_t.a)(e))}},{key:"setGenres",value:function(e){this.filters.with_genres=e,console.log(e)}},{key:"deleteGenre",value:function(e){var t=this.filters.with_genres,a=t.indexOf(e);t.splice(a,1)}},{key:"resetFilters",value:function(){this.filters={sort_by:"popularity.desc","primary_release_date.gte":"","primary_release_date.lte":"","vote_average.gte":"",with_genres:[]}}},{key:"resetMovies",value:function(){this.movies=void 0,this.currentPage=void 0,this.totalPages=void 0}},{key:"setSelectedMovieAsWatched",value:function(){var e=this._lastSelectedMovie;void 0!==e&&(this.movies[e].watched_films_count=1)}},{key:"fetchMovies",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a,r,n,i,o,s,l=arguments;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:1,console.log("fetching movies page ",t),(a=this._getDefinedFilters()).page=t,console.log(a),e.prev=5,this.setIsLoading(!0),e.next=9,Bt.a.get("http://localhost:3200/films",{params:a,withCredentials:!0});case 9:r=e.sent,console.log(r),!0===r.data.success?(n=r.data.movies,i=n.page,o=n.total_pages,s=n.results,1===t?this.setMovies(s):this.pushMovies(s),this.setPage(i),this.setTotalPages(o)):(this.setMovies(null),console.log(r.data.error)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),this.setMovies(null),console.log(e.t0);case 18:return e.prev=18,this.setIsLoading(!1),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[5,14,18,21]])}));return function(){return e.apply(this,arguments)}}()},{key:"fetchSearchResults",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a,r,n,i,o,s=arguments;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,console.log("Searching for ".concat(this.currentQuery,", page ").concat(t)),this.setIsLoading(!0),e.prev=3,e.next=6,Bt.a.get("http://localhost:3200/films",{params:{query:this.currentQuery,page:t},withCredentials:!0});case 6:a=e.sent,console.log(a),!0===a.data.success?(r=a.data.movies,n=r.page,i=r.total_pages,o=r.results,1===t?(console.log("setting movies",o),this.setMovies(o)):(console.log("pushing movies"),this.pushMovies(o)),this.setPage(n),this.setTotalPages(i)):(this.setMovies(null),console.log(a.data.error)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:return e.prev=14,this.setIsLoading(!1),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[3,11,14,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"_getDefinedFilters",value:function(){var e=this,t=this.filters,a=[];Object.keys(this.filters).forEach(function(t){void 0!==e.filters[t]&&a.push(t)});var r={};return a.length>0&&a.forEach(function(e){r[e]=t[e]}),Object(It.n)(r)}}]),e}(),pt=Object(Nt.a)(mt.prototype,"isLoading",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dt=Object(Nt.a)(mt.prototype,"searchMode",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ht=Object(Nt.a)(mt.prototype,"currentQuery",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),gt=Object(Nt.a)(mt.prototype,"movies",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),bt=Object(Nt.a)(mt.prototype,"currentPage",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ft=Object(Nt.a)(mt.prototype,"totalPages",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),vt=Object(Nt.a)(mt.prototype,"filters",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{sort_by:"popularity.desc","primary_release_date.gte":"2000-01-01","primary_release_date.lte":"2019-12-31","vote_average.gte":"5",with_genres:[]}}}),Object(Nt.a)(mt.prototype,"setIsLoading",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setIsLoading"),mt.prototype),Object(Nt.a)(mt.prototype,"setSearchMode",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setSearchMode"),mt.prototype),Object(Nt.a)(mt.prototype,"setCurrentQuery",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setCurrentQuery"),mt.prototype),Object(Nt.a)(mt.prototype,"setPage",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setPage"),mt.prototype),Object(Nt.a)(mt.prototype,"setTotalPages",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setTotalPages"),mt.prototype),Object(Nt.a)(mt.prototype,"setFilter",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setFilter"),mt.prototype),Object(Nt.a)(mt.prototype,"setMovies",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setMovies"),mt.prototype),Object(Nt.a)(mt.prototype,"pushMovies",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"pushMovies"),mt.prototype),Object(Nt.a)(mt.prototype,"setGenres",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setGenres"),mt.prototype),Object(Nt.a)(mt.prototype,"deleteGenre",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"deleteGenre"),mt.prototype),Object(Nt.a)(mt.prototype,"resetFilters",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"resetFilters"),mt.prototype),Object(Nt.a)(mt.prototype,"resetMovies",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"resetMovies"),mt.prototype),Object(Nt.a)(mt.prototype,"setSelectedMovieAsWatched",[It.d],Object.getOwnPropertyDescriptor(mt.prototype,"setSelectedMovieAsWatched"),mt.prototype),mt),Ut=new(yt=function(){function e(){Object(O.a)(this,e),Object(Ft.a)(this,"self",Et,this)}return Object(w.a)(e,[{key:"setSelf",value:function(e){this.self=e}},{key:"updateSelfField",value:function(e,t){this.self[e]=t}},{key:"forgetSelf",value:function(){this.self=null}},{key:"pullSelf",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a=this;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bt.a.get("http://localhost:8080/api/profile",{withCredentials:!0});case 3:t=e.sent,this.setSelf(t.data.payload),ot.changeLanguage(this.self.locale),Object(It.l)(function(){return a.self.locale},function(e){return ot.changeLanguage(e)}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),this.setSelf(null),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"importPictureFromSocial",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a,r;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bt.a.get("http://localhost:8080/api/social_avatar",{withCredentials:!0});case 3:"ok"===(t=e.sent).data.status?(a=t.data.payload.avatar,this.updateSelfField("avatar",a)):(r=Object.values(t.data.reason)[0],console.error(r)),console.log(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t,a){var r,n,i,o;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r={})[t]=a,e.prev=2,e.next=5,Bt.a.post("http://localhost:8080/api/profile",r,{withCredentials:!0});case 5:if("ok"!==(n=e.sent).data.status){e.next=12;break}return i=n.data.payload[t],this.updateSelfField(t,i),e.abrupt("return",{success:!0});case 12:return o=Object.values(n.data.reason)[0],e.abrupt("return",{success:!1,error:o});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",{success:!1,error:"Unexpected error occured"});case 20:case"end":return e.stop()}},e,this,[[2,16]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a,r,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t},e.prev=1,e.next=4,Bt.a.post("http://localhost:8080/api/profile/email",a,{withCredentials:!0});case 4:if(r=e.sent,console.log(r),"ok"!==r.data.status){e.next=10;break}return e.abrupt("return",{success:!0});case 10:return n=Object.values(r.data.reason)[0],e.abrupt("return",{success:!1,error:n});case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{success:!1,error:"Unexpected error occured"});case 18:case"end":return e.stop()}},e,this,[[1,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"updateLocale",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={locale:t},e.prev=1,e.next=4,Bt.a.post("http://localhost:8080/api/profile/locale",a,{withCredentials:!0});case 4:if("ok"!==e.sent.data.status){e.next=11;break}this.updateSelfField("locale",t),Qt.resetMovies(),Qt.setSearchMode(!1),e.next=12;break;case 11:return e.abrupt("return",!1);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this,[[1,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"updatePassword",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t,a){var r,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={old_password:t,new_password:a},e.prev=1,e.next=4,Bt.a.post("http://localhost:8080/api/profile/pass",r,{withCredentials:!0});case 4:if(n=e.sent,console.log(n),"ok"!==n.data.status){e.next=10;break}return e.abrupt("return",{success:!0});case 10:return e.abrupt("return",{success:!1,error:n.data.reason});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{success:!1,error:{old_password:"Some unexpected error occured"}});case 17:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),Et=Object(Nt.a)(yt.prototype,"self",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(Nt.a)(yt.prototype,"setSelf",[It.d],Object.getOwnPropertyDescriptor(yt.prototype,"setSelf"),yt.prototype),Object(Nt.a)(yt.prototype,"updateSelfField",[It.d],Object.getOwnPropertyDescriptor(yt.prototype,"updateSelfField"),yt.prototype),Object(Nt.a)(yt.prototype,"forgetSelf",[It.d],Object.getOwnPropertyDescriptor(yt.prototype,"forgetSelf"),yt.prototype),yt),Gt=new(Ot=function(){function e(){Object(O.a)(this,e),Object(Ft.a)(this,"fields",wt,this),Object(Ft.a)(this,"errors",jt,this)}return Object(w.a)(e,[{key:"setFieldValue",value:function(e,t){this.fields[e]=t,this.errors[e]=""}},{key:"setError",value:function(e,t){this.errors[e]=t}},{key:"setErrors",value:function(e){var t=this;Object.keys(e).forEach(function(a){t.errors[a]=e[a]})}},{key:"register",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._validateFields(["fname","lname","uname","email","password","confirmPassword"])){e.next=21;break}return t=Object(Mt.a)({},this.fields),this.clearErrors(),e.prev=3,e.next=6,Bt.a.post("http://localhost:8080/api/auth/registration",t,{withCredentials:!0});case 6:if("ok"!==(a=e.sent).data.status){e.next=12;break}return this.resetStore(),e.abrupt("return",!0);case 12:if("error"!==a.data.status){e.next=15;break}return this.setErrors(a.data.reason),e.abrupt("return",!1);case 15:console.log(a),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0);case 21:case"end":return e.stop()}},e,this,[[3,18]])}));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a,r,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.fields,a=t.uname,r=t.password,this.clearErrors(),e.prev=2,e.next=5,Bt.a.post("http://localhost:8080/api/auth/login",{uname:a,password:r},{withCredentials:!0});case 5:"ok"===(n=e.sent).data.status?Ut.setSelf(n.data.payload):this.setErrors({uname:"Invalid username or password"}),console.log(n),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"lostPass",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._validateFields(["email"])){e.next=21;break}return t=this.fields.email,this.clearErrors(),e.prev=3,e.next=6,Bt.a.post("http://localhost:8080/api/auth/lostpass",{email:t},{withCredentials:!0});case 6:if("ok"!==(a=e.sent).data.status){e.next=11;break}return e.abrupt("return",!0);case 11:if("error"!==a.data.status){e.next=14;break}return this.setErrors(a.data.reason),e.abrupt("return",!1);case 14:console.log(a),e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,this,[[3,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"newPass",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t,a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._validateFields(["password","confirmPassword"])){e.next=21;break}return t=this.fields.password,this.clearErrors(),e.prev=3,e.next=6,Bt.a.post("http://localhost:8080/api/auth/lostpass/newpass",{password:t},{withCredentials:!0});case 6:if("ok"!==(a=e.sent).data.status){e.next=11;break}return e.abrupt("return",!0);case 11:if("error"!==a.data.status){e.next=14;break}return this.setErrors(a.data.reason),e.abrupt("return",!1);case 14:console.log(a),e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,this,[[3,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(we.a)(Oe.a.mark(function e(){var t;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bt.a.post("http://localhost:8080/api/auth/logout",null,{withCredentials:!0});case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"clearErrors",value:function(){this.errors={fname:"",lname:"",uname:"",email:"",password:"",confirmPassword:""}}},{key:"resetStore",value:function(){this.fields={fname:"",lname:"",uname:"",email:"",password:"",confirmPassword:""},this.errors={fname:"",lname:"",uname:"",email:"",password:"",confirmPassword:""}}},{key:"_validateFields",value:function(e){var t=this,a=!0,r=this.fields,n=r.fname,i=r.lname,o=r.uname,s=r.email,l=r.password,c=r.confirmPassword;return e.forEach(function(e){"uname"===e?o.length<6?(t.setError(e,"Username is too short."),a=!1):o.length>16&&(t.setError(e,"Username is too long"),a=!1):"fname"===e?n.length<1?(t.setError(e,"First name is too short."),a=!1):n.length>50&&(t.setError(e,"First name is too long"),a=!1):"lname"===e?i.length<1?(t.setError(e,"Last name is too short."),a=!1):i.length>50&&(t.setError(e,"Last name is too long"),a=!1):"password"===e?l.length<8?(t.setError(e,"Password is too short."),a=!1):l.length>20&&(t.setError(e,"Password is too long"),a=!1):"confirmPassword"===e?l!==c&&(t.setError("confirmPassword","Passwords doesn't match."),a=!1):"email"===e&&!1===He.validate(s)&&(t.setError(e,"Email is invalid."),a=!1)}),a}}]),e}(),wt=Object(Nt.a)(Ot.prototype,"fields",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fname:"",lname:"",uname:"",email:"",password:"",confirmPassword:""}}}),jt=Object(Nt.a)(Ot.prototype,"errors",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fname:"",lname:"",uname:"",email:"",password:"",confirmPassword:""}}}),Object(Nt.a)(Ot.prototype,"setFieldValue",[It.d],Object.getOwnPropertyDescriptor(Ot.prototype,"setFieldValue"),Ot.prototype),Object(Nt.a)(Ot.prototype,"setError",[It.d],Object.getOwnPropertyDescriptor(Ot.prototype,"setError"),Ot.prototype),Object(Nt.a)(Ot.prototype,"setErrors",[It.d],Object.getOwnPropertyDescriptor(Ot.prototype,"setErrors"),Ot.prototype),Object(Nt.a)(Ot.prototype,"clearErrors",[It.d],Object.getOwnPropertyDescriptor(Ot.prototype,"clearErrors"),Ot.prototype),Object(Nt.a)(Ot.prototype,"resetStore",[It.d],Object.getOwnPropertyDescriptor(Ot.prototype,"resetStore"),Ot.prototype),Ot),Vt=new(kt=function(){function e(){Object(O.a)(this,e),Object(Ft.a)(this,"user",St,this)}return Object(w.a)(e,[{key:"setUser",value:function(e){this.user=e}},{key:"forgetUser",value:function(){this.user=null}},{key:"pullUser",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bt.a.get("http://localhost:8080/api/user/"+t,{withCredentials:!0});case 3:a=e.sent,this.setUser(a.data.payload),console.log("User: ",a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),this.user=null,console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),St=Object(Nt.a)(kt.prototype,"user",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(Nt.a)(kt.prototype,"setUser",[It.d],Object.getOwnPropertyDescriptor(kt.prototype,"setUser"),kt.prototype),Object(Nt.a)(kt.prototype,"forgetUser",[It.d],Object.getOwnPropertyDescriptor(kt.prototype,"forgetUser"),kt.prototype),kt),Tt=a(263),Rt=new(Ct=function(){function e(){Object(O.a)(this,e),Object(Ft.a)(this,"isLoading",At,this),Object(Ft.a)(this,"movie",Pt,this),Object(Ft.a)(this,"stream",xt,this),Object(Ft.a)(this,"comments",Dt,this)}return Object(w.a)(e,[{key:"setMovie",value:function(e){this.movie=e}},{key:"resetMovie",value:function(){this.movie=void 0}},{key:"setComments",value:function(e){this.comments=e}},{key:"addComment",value:function(e){this.comments.unshift(e)}},{key:"setStream",value:function(e){this.stream=e}},{key:"fetchMovieDetails",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a,r,n,i,o;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://localhost:3200/film_details/".concat(t),e.prev=1,e.next=4,Bt.a.get(a,{withCredentials:!0});case 4:(r=e.sent).data.success?(n=r.data,i=n.movie_details,o=n.streaming,this.setMovie(Object(Tt.a)({},i,{streaming:o})),console.log(i,o)):this.setMovie(null),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),this.setMovie(null);case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchComments",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t){var a;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8080/api/comments",e.prev=1,e.next=4,Bt.a.get("http://localhost:8080/api/comments",{withCredentials:!0,params:{id:t}});case 4:"ok"===(a=e.sent).data.status&&(this.setComments(a.data.payload),console.log(a.data.payload)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"postComment",value:function(){var e=Object(we.a)(Oe.a.mark(function e(t,a){var r,n;return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8080/api/comments",r={imdb_id:t,text:a},e.prev=2,e.next=5,Bt.a.post("http://localhost:8080/api/comments",r,{withCredentials:!0});case 5:"ok"===(n=e.sent).data.status&&(console.log("added comment",n.data),this.addComment(n.data.payload)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),At=Object(Nt.a)(Ct.prototype,"isLoading",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt=Object(Nt.a)(Ct.prototype,"movie",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),xt=Object(Nt.a)(Ct.prototype,"stream",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Dt=Object(Nt.a)(Ct.prototype,"comments",[It.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(Nt.a)(Ct.prototype,"setMovie",[It.d],Object.getOwnPropertyDescriptor(Ct.prototype,"setMovie"),Ct.prototype),Object(Nt.a)(Ct.prototype,"resetMovie",[It.d],Object.getOwnPropertyDescriptor(Ct.prototype,"resetMovie"),Ct.prototype),Object(Nt.a)(Ct.prototype,"setComments",[It.d],Object.getOwnPropertyDescriptor(Ct.prototype,"setComments"),Ct.prototype),Object(Nt.a)(Ct.prototype,"addComment",[It.d],Object.getOwnPropertyDescriptor(Ct.prototype,"addComment"),Ct.prototype),Object(Nt.a)(Ct.prototype,"setStream",[It.d],Object.getOwnPropertyDescriptor(Ct.prototype,"setStream"),Ct.prototype),Ct),zt={AuthStore:Gt,SelfStore:Ut,UserStore:Vt,LibraryStore:Qt,MovieStore:Rt};y.a.render(f.a.createElement(B.a,zt,f.a.createElement(ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALkAAAC5CAMAAABDc25uAAACQFBMVEVHcEwMDAwrKysICAgBAQEAAAACAgIAAAAAAAAcGhoKBwcHBwcAAAAMCgoBAQASEhITDw8BAAABAAABAQEBAQEBAQEFAwMEAgIJCQkEAwMEAwMEAgIAAAABAQECAgIFAwMEAgICAgIEBAQKCgoDAwMGBgYBAQEEBAQFAwMEAwMBAQEEBAQPDw8DAwMJCQkJCAgEAgIDAgIBAQEGBgYEAwMDAwMDAwMBAQEDAgIGBgYFAwMGAwMFAwMGBgYDAwMEBAQDAwMDAwMEAgIEBAQFAwMGBAQBAQEEAgIEBAQDAwMJCAgICAgJBwcJCQkEBAQBAgEDAwMEAgIFAwMAAAAFAwMNDQ0GBgYFBAQJCQkDAgIEBAQEBAQEAgIPDw8EBAQFBQUEBAQEBAQEBAQFBQUEBAQKCgoICAgHBQUDAwMLCwsCAgIODg4CAgIKCQkIBwcLCwsdGhoDAwMPDw8JCQkEBAQDAwMREREBAQETExMAAAAGBAQFBQUNDQ0JCAgFAwMGBgYDAwMHBwcDAwMFBQUDAwMEBAQFBQUAAAAGBgYAAAACAgIXFxcAAAAHBwcEBAQPDw8IBwcHBQUAAAAODg4IBwcDAwMAAAANDQ0FBQULCwsAAAAEBAQMDAwPDw8fHx8SDg4oKCgICAgKBgYLCwsqKioXFRX/v78nJycSEBAdGhoQDw8NDAwMCwsHBwcCAgIJCQkMDAwLCAgAAAATExMpKSkHBwcDAwMoKCgAAAAAAAABAQEBAAACAgIEBAQCAQEDAwMuuxT3AAAAuXRSTlMAqEF4/lO45dCsqVnT+dDgxvv89/j6ma2jl5qr/vnLi7Fb9Xg31fv7lZtC91tzrrW8u/Ysbdjs9bnpmIaPf0fkHu+05JGJWrf4WcS6waEj00a1jRyCdn24vLDy565h493O6v3TM6e3hGefLmzQrHlxq0lZsPpLV1Hg7c/gFb6UKulATl3VOt7U3RK+LBFEP2axgQ1okUELdMd0Bjip5BjGRltLs0KAA0HLsLr3+UZpgXu3495EqKJF0XYXGhAAAASNSURBVHja7dr5cxRVEAfwVlcJhwfJJjHBJJBNOHIo5AI5IgaIRCVB5RARQaLIFc5wCYKKIKDgCQqCF16gXJ68yU7yr1lW+cMG932ZeWk7+6r6++tMzX7qVfebnpkl0mg0Go1Go9FoNBqNRqPRaDQajUaj0Qx7Zr97nz1dr2/POHXB5jx7xnTloaMl7PBnxxqQvicyz+1Jg1Orm9GFzDRueFESwscNOvmOhP3U7gM3ofweZvhrhRA+laLK91fRGEl5ST76sWAcRZVXd5KovKQArvh4iiqvvkKi8ln50ZsTyvd3kqi8FNd4MUWVd1eRqLwC7yozKKr82FskKj8I9/FgBUWVNzeSqLwIN+eLFFXefZJE5XNwc1pueFnkwZckKp8Sbx+3yxvaSVQ+HzfnMxRVXlhPovIK3JxtFFWeOEyi8tKyGEMWkk9vIlH5klhDFpAH60lUPhM3ZzFFlSc7SFQ+M+aQZZUX1JOofEncIcsmD0aTqDz+kGWRT19PovKKsthDVnZ5oolE5fPxPj6eosontpOofErSYcjKJm+oJ1G525CVRR4cJlF5Ub7rnfMWecMEEpUfLHAbsv4jL6wnUTkesvraKKo86CBReWly6KXyjzzd0ESi8lnuQ9ag7By4Co7mQfkMF3jJEIasQbm2CxyseRzKVwi8yXLL4hEQXn7a4aUn3g6X88Dn4hVvdtnHC1ma83YrjuHlcx1e7CclVrxqNYRvfmUYhqxI2fgohh9g/yJRzAOf0IJLxWHFl03k2cdvk5dwczrUeGlCojnfrsQrzj9ktfHAa/CKr/mCe8hKP89UKish/J0zDk9A8Jmz/xGm5sQrXt7IPWQFTzLt4y9DeJcDfDIulXVMNY7haz7mfpPV/xQPvONNuDyfH+F+WA6e5oGfewzCHz7u0JzwBhQwNWcrhj/ocMnZ8Jbfz7TirfMg/FUXOG5OphqnWnY4flgO1kns406lMgfWeD/TPv5cC25O9jdZaabmPAXn8YENDpecDPfxgGlWqVnNXioLcHO+wVQqL8Bf6XEplTKJfXx7C/+Kl4kMWXCsTY9yqXFcKjd44IfgE9CAy4rjv30ETDegXUfh8ixyuORHCYkh6318A9rpcMlPx+JJuXHP3W5p78z4lT1wV0m4lAp9BeFm368jHLMv84U5/HeruYCA122F9ID5v7Il41fOw5LcC+A7wmni8rtu/cJlzf12eGqh9ZtFbst3LzR+yjeFxk/5Z5XGT3ndWuOnPDXJ+Cn/oNb4KV8VGj/lqVrjp3xHr/FTfjY0fsq3Vho/5btD46c81Wv8lNfVGj/lm0Ljp3xppfFT/u+Q5Z986STjp/yTrB8FPJCvCk0M+Q8/5Yw8ZfkMY1vz7y9tG+mWbZf7OOV1vSaefAj59mdG+dbQyMlH38snX2R/05vL8r30Bziay/Lf/kzkrPwifCMaPoSOnhhWOf343Z32/P4XOPj1e8Mrz62oXOUqV7nKVa5ylatc5SpXucpVrvIo+eYXE4BsyV35xg09o+z5sJU0Go1Go9FoNBqNRqPRaDQajUaj0Wg0uZW/AfaaK3aB/g2zAAAAAElFTkSuQmCC"}},[[311,2,1]]]);
//# sourceMappingURL=main.926403c2.chunk.js.map